"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.filterValidOutgoingTransactions = void 0;
/**
 * Returns an array of transactions where;
 * `txn.from` matches the provided address (sender) and the txn.isError is not true
 */
const filterValidOutgoingTransactions = (transactions, address) => {
    return transactions.reduce((prev, txn) => {
        var _a;
        // since response is sorted, we only need to compare hash of preceeding valid txn
        if (txn.from.toLowerCase() === address.toLowerCase() &&
            txn.isError !== "1" &&
            ((_a = prev[prev.length - 1]) === null || _a === void 0 ? void 0 : _a.hash) !== txn.hash) {
            return prev.concat([txn]);
        }
        return prev;
    }, []);
};
exports.filterValidOutgoingTransactions = filterValidOutgoingTransactions;
